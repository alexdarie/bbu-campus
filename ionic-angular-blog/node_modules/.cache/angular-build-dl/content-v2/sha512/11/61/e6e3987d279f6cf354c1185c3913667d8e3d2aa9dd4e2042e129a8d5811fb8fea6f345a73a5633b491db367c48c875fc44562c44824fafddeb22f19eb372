(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{rZHr:function(t,e,i){"use strict";i.r(e),i.d(e,"ArticlePageModule",(function(){return $}));var n=i("ofXK"),o=i("3Pt+"),r=i("TEn/"),a=i("tyNb"),s=i("mrSG"),c=i("Wcq6"),l=i("Cwn9"),b=i("fXoL"),d=i("tk/3"),g=i("jhN1"),h=i("0MNC"),p=i("S/Aq");let m=(()=>{class t{constructor(t){this.http=t}getIPAddress(){return this.http.get("https://api.ipify.org?format=json")}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(d.a))},t.\u0275prov=b.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function u(t,e){if(1&t&&(b.Ob(0,"ion-slide"),b.Mb(1,"img",37),b.Nb()),2&t){const t=e.$implicit,i=b.Xb(4);b.Ab(1),b.bc("src",i.article.media.picture[t],b.hc)}}function f(t,e){if(1&t&&(b.Ob(0,"div",35),b.Ob(1,"ion-slides",36),b.kc(2,u,2,1,"ion-slide",24),b.Nb(),b.Nb()),2&t){const t=b.Xb().$implicit,e=b.Xb(2);b.Ab(1),b.ac("options",e.slideOpts),b.Ab(1),b.ac("ngForOf",t.indexes)}}function O(t,e){if(1&t&&(b.Ob(0,"div"),b.kc(1,f,3,2,"div",34),b.Nb()),2&t){const t=e.$implicit;b.Ab(1),b.ac("ngIf","slider"===t.content)}}function v(t,e){if(1&t&&(b.Ob(0,"ion-col",33),b.kc(1,O,2,1,"div",24),b.Nb()),2&t){const t=b.Xb();b.Ab(1),b.ac("ngForOf",t.objectValues(t.article.content.rules))}}function w(t,e){if(1&t&&b.Mb(0,"div",44),2&t){const t=e.$implicit,i=b.Xb(4);b.bc("innerHtml",i.article.content.paragraphs[t],b.gc)}}function y(t,e){if(1&t&&(b.Ob(0,"div"),b.kc(1,w,1,1,"div",43),b.Nb()),2&t){const t=b.Xb().$implicit;b.Ab(1),b.ac("ngForOf",t.indexes)}}function x(t,e){if(1&t&&(b.Ob(0,"div"),b.kc(1,y,2,1,"div",42),b.Nb()),2&t){const t=e.$implicit;b.Ab(1),b.ac("ngIf","paragraph"===t.content)}}function N(t,e){if(1&t&&(b.Ob(0,"ion-col",38),b.Ob(1,"div"),b.Ob(2,"h1",39),b.lc(3),b.Nb(),b.Ob(4,"ion-row",40),b.Ob(5,"p",41),b.lc(6),b.Nb(),b.Nb(),b.Nb(),b.kc(7,x,2,1,"div",24),b.Nb()),2&t){const t=b.Xb();b.Ab(3),b.nc(" ",t.article.title," "),b.Ab(3),b.nc("",t.article.readTime," minute read"),b.Ab(1),b.ac("ngForOf",t.objectValues(t.article.content.rules))}}function A(t,e){if(1&t&&b.Mb(0,"div",44),2&t){const t=e.$implicit,i=b.Xb(4);b.bc("innerHtml",i.article.content.paragraphs[t],b.gc)}}function M(t,e){if(1&t&&(b.Ob(0,"div"),b.kc(1,A,1,1,"div",43),b.Nb()),2&t){const t=b.Xb().$implicit;b.Ab(1),b.ac("ngForOf",t.indexes)}}function P(t,e){if(1&t&&(b.Ob(0,"div"),b.kc(1,M,2,1,"div",42),b.Nb()),2&t){const t=e.$implicit;b.Ab(1),b.ac("ngIf","paragraph"===t.content)}}function k(t,e){if(1&t&&(b.Ob(0,"ion-slide"),b.Mb(1,"img",37),b.Nb()),2&t){const t=e.$implicit,i=b.Xb(4);b.Ab(1),b.bc("src",i.article.media.picture[t],b.hc)}}function _(t,e){if(1&t&&(b.Ob(0,"div"),b.Ob(1,"ion-slides",36),b.kc(2,k,2,1,"ion-slide",24),b.Nb(),b.Nb()),2&t){const t=b.Xb().$implicit,e=b.Xb(2);b.Ab(1),b.ac("options",e.slideOpts),b.Ab(1),b.ac("ngForOf",t.indexes)}}function C(t,e){if(1&t&&(b.Ob(0,"div"),b.kc(1,_,3,2,"div",42),b.Nb()),2&t){const t=e.$implicit;b.Ab(1),b.ac("ngIf","slider"===t.content)}}function F(t,e){if(1&t&&(b.Ob(0,"ion-col",38),b.Ob(1,"div"),b.Ob(2,"h1",39),b.lc(3),b.Nb(),b.Ob(4,"ion-row",40),b.Ob(5,"p",41),b.lc(6),b.Nb(),b.Nb(),b.Nb(),b.kc(7,P,2,1,"div",24),b.kc(8,C,2,1,"div",24),b.Nb()),2&t){const t=b.Xb();b.Ab(3),b.nc(" ",t.article.title," "),b.Ab(3),b.nc("",t.article.readTime," minute read"),b.Ab(1),b.ac("ngForOf",t.objectValues(t.article.content.rules)),b.Ab(1),b.ac("ngForOf",t.objectValues(t.article.content.rules))}}const I=function(t,e){return["/article",t,e]};function S(t,e){if(1&t&&(b.Ob(0,"ion-col"),b.Ob(1,"ion-item",45),b.Ob(2,"ion-col"),b.Mb(3,"img",46),b.Ob(4,"ion-card-header"),b.Ob(5,"ion-card-title",47),b.lc(6),b.Nb(),b.Nb(),b.Ob(7,"ion-card-content",48),b.Ob(8,"div"),b.lc(9),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&t){const t=e.$implicit;b.Ab(1),b.ac("routerLink",b.ec(4,I,t.category,t.id)),b.Ab(2),b.bc("src",t.media.square,b.hc),b.Ab(3),b.mc(t.title),b.Ab(3),b.nc(" ",t.content.header.substring(0,100),"")}}const j=function(t){return{gave:t}},X=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,r,a,s){this.http=t,this.modalController=e,this.activatedRoute=i,this.sanitizer=n,this.breakpointObserver=o,this.router=r,this.firestore=a,this.ip=s,this.slideOptions={1:{initialSlide:0,speed:600,loop:!0},2:{initialSlide:0,speed:400,slidesPerView:4.5},3:{initialSlide:0,speed:400,slidesPerView:2.5},4:{initialSlide:0,speed:400,slidesPerView:1.8}},this.article={id:0,title:"",author:"",date:"",peopleInvolved:[],photosAuthor:"",readTime:0,poster:"",image:"",category:"",content:{rules:{},header:"",paragraphs:[]},media:{picture:[],video:[],grid:[]},reactions:{energy:0,rid:""}},this.articles={popular:[]},this.slideOpts={initialSlide:0,speed:400,autoHeight:!0},this.collectionName="articles",this.gaveEnergy=!1,this.postFeedbackProgress=0,this.maxAmountOfEnergy=10,this.wideArticle=!0,this.narrowArticle=!1,this.logoImage="https://firebasestorage.googleapis.com/v0/b/alexdarie-2251.appspot.com/o/utils%2Flogo.png?alt=media&token=408fdde2-51fc-4761-b285-84d7fb711dc3",this.howMany=3,this.activatedRoute.params.subscribe(t=>{this.id=t.id,this.category=t.type}),this.disableReactions=!1}ngOnInit(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){this.router.onSameUrlNavigation="reload",(yield this.firestore.collection(this.collectionName).ref.orderBy("date","desc").get()).forEach(t=>{this.processSnapshopDoc(t)}),yield this.getIP();var t=this.firestore.collection("reactions").doc(this.article.reactions.rid);const e=(yield t.ref.get()).data();e.hasOwnProperty("views")&&e.views.includes(this.ipAddress)||t.update({views:c.firestore.FieldValue.arrayUnion(this.ipAddress)}),e.energy.includes(this.ipAddress)&&(this.gaveEnergy=!0),this.setViewBreakpoints()}))}setViewBreakpoints(){this.breakpointObserver.observe(["(min-width: 1199px)"]).subscribe(t=>{t.matches?(this.wideArticle=!0,this.narrowArticle=!1):(this.narrowArticle=!0,this.wideArticle=!1)}),this.breakpointObserver.observe(["(min-width: 836px)"]).subscribe(t=>{this.howMany=t.matches?3:4})}getIP(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){return new Promise((t,e)=>{this.ip.getIPAddress().subscribe(e=>{this.ipAddress=e.ip,console.log(this.ipAddress),t(!0)})})}))}processSnapshopDoc(t){return Object(s.__awaiter)(this,void 0,void 0,(function*(){const e=t.data();if(e.id==this.id&&e.category===this.category){this.article=e,this.articleHash=t.id;var i=this.firestore.collection("reactions").doc(this.article.reactions.rid);const n=(yield i.ref.get()).data();this.article.reactions.energy=n.energy.length,this.postFeedbackProgress=n.energy.length/this.maxAmountOfEnergy}else this.buildMostPopularArticles(e)}))}updateArticle(t){const e=t.data();e.id==this.id&&e.category===this.category&&(this.article=e,this.articleHash=t.id)}buildMostPopularArticles(t){const e=this.articles.popular,i=e.length;let n=0;for(let o=0;o<i-1;o++)t.views<e[o].views&&(n+=1);for(let o=i;o>n;o--)e[o]=e[o-1];e[n]=t}ngOnDestroy(){this.router.onSameUrlNavigation="ignore"}delay(t){return new Promise(e=>setTimeout(e,t))}react(t){return Object(s.__awaiter)(this,void 0,void 0,(function*(){this.disableReactions=!0,this.articleHash.length<1&&(yield this.getIP());var e=this.firestore.collection("reactions").doc(this.article.reactions.rid);const i=(yield e.ref.get()).data();this.firestore.collection("articles").doc(this.articleHash),"energy"===t&&(i.energy.includes(this.ipAddress)?e.update({energy:c.firestore.FieldValue.arrayRemove(this.ipAddress)}).then(()=>{this.article.reactions.energy-=1,this.gaveEnergy=!1,this.disableReactions=!1,this.postFeedbackProgress=this.article.reactions.energy/this.maxAmountOfEnergy}):e.update({energy:c.firestore.FieldValue.arrayUnion(this.ipAddress)}).then(()=>{this.article.reactions.energy+=1,this.gaveEnergy=!0,this.disableReactions=!1,this.postFeedbackProgress=this.article.reactions.energy/this.maxAmountOfEnergy}))}))}objectValues(t){return Object.values(t)}presentModal(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:l.a,swipeToClose:!0,componentProps:{evnt:this.article},cssClass:"custom-modal-css"});return yield t.present()}))}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(d.a),b.Lb(r.z),b.Lb(a.a),b.Lb(g.b),b.Lb(h.a),b.Lb(a.f),b.Lb(p.a),b.Lb(m))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-article"]],decls:55,vars:13,consts:[[3,"translucent"],[1,"toolbar"],["routerLink","/home",2,"background-color","transparent","border","none","outline","none"],[1,"site-title",3,"src"],["slot","end",1,"toolbar-buttons"],["href","https://www.instagram.com/_alexdarie/","target","_blank"],["slot","icon-only","ios","logo-instagram","md","logo-instagram",1,"white-icons"],["href","https://github.com/alexdarie","target","_blank"],["slot","icon-only","name","logo-github",1,"white-icons"],[2,"padding","0"],[1,"parallax"],[1,"article-body"],[2,"margin-top","20px"],["class","media",4,"ngIf"],["class","textual",4,"ngIf"],["lines","none"],["slot","end"],[3,"disabled","click"],["slot","icon-only","ios","flash","md","flash",1,"did-not-give",3,"ngClass"],["tooltip","test","slot","end",3,"value"],[2,"padding","10px","margin-top","20px"],[1,"article-body-lg",2,"padding-top","10px","margin-bottom","10px","text-transform","uppercase","font-family","'Noto Sans Avestan', sans-serif","font-size","20px"],[2,"color","gray"],[1,"article-body-lg"],[4,"ngFor","ngForOf"],[2,"background-color","black"],[1,"posts-centered-container",2,"background-color","black","color","white"],[1,"card-subtitle-light-white"],["name","logo-ionic"],["name","heart"],["name","logo-firebase"],["href","https://www.messenger.com/t/alexandru.darie.1",2,"color","white"],[1,"contact-last-col"],[1,"media"],["style","padding: 0vw; margin-left: auto; margin-right: auto;",4,"ngIf"],[2,"padding","0vw","margin-left","auto","margin-right","auto"],["pager","true",3,"options"],[2,"margin","auto",3,"src"],[1,"textual"],[2,"margin-bottom","15px","font-family","'Noto Sans Avestan', sans-serif"],[2,"margin","-25px 0 0 0"],[1,"author",2,"font-family","'Noto Sans Avestan', sans-serif"],[4,"ngIf"],["style","font-family: 'Noto Sans Avestan', sans-serif; margin-bottom: 10px; font-size: 17px; line-height: 1.35;",3,"innerHtml",4,"ngFor","ngForOf"],[2,"font-family","'Noto Sans Avestan', sans-serif","margin-bottom","10px","font-size","17px","line-height","1.35",3,"innerHtml"],["lines","none",1,"news-min-width",3,"routerLink"],[3,"src"],[1,"card-title"],[1,"card-content"]],template:function(t,e){1&t&&(b.Ob(0,"ion-header",0),b.Ob(1,"ion-toolbar",1),b.Ob(2,"ion-text"),b.Ob(3,"button",2),b.Mb(4,"img",3),b.Nb(),b.Nb(),b.Ob(5,"ion-buttons",4),b.Ob(6,"ion-button",5),b.Mb(7,"ion-icon",6),b.Nb(),b.Ob(8,"ion-button",7),b.Mb(9,"ion-icon",8),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(10,"ion-content"),b.Ob(11,"ion-row"),b.Ob(12,"ion-col",9),b.Mb(13,"div",10),b.Ob(14,"div",11),b.Ob(15,"ion-row",12),b.kc(16,v,2,1,"ion-col",13),b.kc(17,N,8,3,"ion-col",14),b.kc(18,F,9,4,"ion-col",14),b.Nb(),b.Nb(),b.Ob(19,"div",11),b.Ob(20,"ion-list",15),b.Ob(21,"ion-item"),b.Ob(22,"ion-buttons",16),b.Ob(23,"ion-button",17),b.Vb("click",(function(){return e.react("energy")})),b.Mb(24,"ion-icon",18),b.Nb(),b.Nb(),b.Mb(25,"ion-progress-bar",19),b.Nb(),b.Nb(),b.Nb(),b.Ob(26,"div",20),b.Ob(27,"p",21),b.Ob(28,"span",22),b.lc(29,"Recent"),b.Nb(),b.lc(30," posts"),b.Nb(),b.Ob(31,"ion-row",23),b.kc(32,S,10,7,"ion-col",24),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(33,"ion-footer",25),b.Ob(34,"ion-grid"),b.Ob(35,"ion-row",26),b.Ob(36,"ion-col"),b.Ob(37,"p",27),b.lc(38,"Alex Darie"),b.Nb(),b.Nb(),b.Ob(39,"ion-col",27),b.Ob(40,"p"),b.lc(41,"Coded with "),b.Mb(42,"ion-icon",28),b.lc(43,", "),b.Mb(44,"ion-icon",29),b.lc(45,", namecheap, and "),b.Mb(46,"ion-icon",30),b.lc(47,"."),b.Mb(48,"br"),b.Nb(),b.Ob(49,"p"),b.lc(50,"The fastest (and most reliable) way to reach me is on Messenger: "),b.Nb(),b.Ob(51,"p"),b.Ob(52,"a",31),b.lc(53,"m.me/alexandru.darie.1"),b.Nb(),b.Nb(),b.Nb(),b.Mb(54,"ion-col",32),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&t&&(b.ac("translucent",!0),b.Ab(4),b.ac("src",e.logoImage,b.hc),b.Ab(9),b.jc("background-image",e.article.poster,b.Eb),b.Ab(3),b.ac("ngIf",e.wideArticle),b.Ab(1),b.ac("ngIf",e.wideArticle),b.Ab(1),b.ac("ngIf",e.narrowArticle),b.Ab(5),b.ac("disabled",e.disableReactions),b.Ab(1),b.ac("ngClass",b.dc(11,j,e.gaveEnergy)),b.Ab(1),b.bc("value",e.postFeedbackProgress),b.Ab(7),b.ac("ngForOf",e.articles.popular.slice(0,e.howMany)))},directives:[r.l,r.w,r.v,r.C,a.g,r.c,r.b,r.m,r.i,r.s,r.h,n.j,r.p,r.n,n.h,r.q,n.i,r.j,r.k,r.u,r.t,r.f,r.g,r.e],styles:["p[_ngcontent-%COMP%]{font-size:16px}.article-body[_ngcontent-%COMP%], .article-body-lg[_ngcontent-%COMP%]{margin:0 20vw}.author[_ngcontent-%COMP%]{font-size:13px;color:grey;font-family:Noto Sans Avestan,sans-serif}.media[_ngcontent-%COMP%]{min-width:450px;margin-bottom:auto;margin-right:20px}.textual[_ngcontent-%COMP%]{min-width:350px}.card-subtitle[_ngcontent-%COMP%], .card-subtitle-black[_ngcontent-%COMP%]{font-family:Noto Sans Avestan,sans-serif}.card-subtitle-black[_ngcontent-%COMP%]{color:#000}.card-subtitle-light-white[_ngcontent-%COMP%]{color:#c9c9c9}.card-subtitle-light-white[_ngcontent-%COMP%], .card-title[_ngcontent-%COMP%]{font-family:Noto Sans Avestan,sans-serif}.card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:530}.card-content[_ngcontent-%COMP%]{font-family:Noto Sans Avestan,sans-serif}.parallax[_ngcontent-%COMP%]{height:35vh;background-attachment:fixed;background-position:top;background-repeat:no-repeat;background-size:contain;margin-bottom:-20px}ion-toolbar[_ngcontent-%COMP%]{padding-left:5vw;padding-right:5vw}.site-title[_ngcontent-%COMP%]{margin:2px 0 0 1vw;height:30px}.posts-centered-container[_ngcontent-%COMP%]{margin:30px 10vw;background-color:#fff}.news-min-width[_ngcontent-%COMP%]{min-width:240px}.did-not-give[_ngcontent-%COMP%]{color:grey}.gave[_ngcontent-%COMP%]{color:#fcba03}ion-progress-bar[_ngcontent-%COMP%]{margin-left:3px;border-radius:5px;height:10px;--progress-background:#fcba03;width:15vw;min-width:120px}@media screen and (min-width:2000px){.posts-centered-container[_ngcontent-%COMP%]{margin:30px 20vw}}@media only screen and (max-device-width:1366px){.parallax[_ngcontent-%COMP%]{background-attachment:scroll}}@media screen and (max-width:1500px){.article-body[_ngcontent-%COMP%], .article-body-lg[_ngcontent-%COMP%]{margin:0 10vw}}@media screen and (max-width:1125px){.posts-centered-container[_ngcontent-%COMP%]{margin:30px 2vw}.article-body[_ngcontent-%COMP%]{margin:0 5vw}.article-body-lg[_ngcontent-%COMP%]{margin:0 3vw}}@media screen and (max-width:950px){.posts-centered-container[_ngcontent-%COMP%]{margin:30px 1vw}.contact-last-col[_ngcontent-%COMP%]{max-width:5vw}}@media screen and (max-width:636px){.media[_ngcontent-%COMP%]{min-width:auto}.site-title[_ngcontent-%COMP%]{height:28px}}@media screen and (max-width:450px){.textual[_ngcontent-%COMP%]{min-width:250px}}@media screen and (max-width:420px){.site-title[_ngcontent-%COMP%]{font-size:27px}.card-title[_ngcontent-%COMP%]{font-size:18px}}@media screen and (max-width:330px){.site-title[_ngcontent-%COMP%]{font-size:26px}}"]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[a.h.forChild(X)],a.h]}),t})(),$=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[n.b,o.a,r.x,V,d.b]]}),t})()}}]);