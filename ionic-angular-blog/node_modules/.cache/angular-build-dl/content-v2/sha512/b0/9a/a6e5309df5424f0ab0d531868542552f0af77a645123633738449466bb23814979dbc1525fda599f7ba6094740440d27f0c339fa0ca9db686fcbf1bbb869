function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{rZHr:function(e,t,n){"use strict";n.r(t),n.d(t,"ArticlePageModule",(function(){return F}));var i,r=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),c=n("mrSG"),l=n("Wcq6"),d=n("Cwn9"),g=n("fXoL"),b=n("tk/3"),p=n("jhN1"),u=n("0MNC"),h=n("S/Aq"),m=((i=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getIPAddress",value:function(){return this.http.get("https://api.ipify.org?format=json")}}]),e}()).\u0275fac=function(e){return new(e||i)(g.Rb(b.a))},i.\u0275prov=g.Hb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function f(e,t){if(1&e&&g.Mb(0,"div",40),2&e){var n=t.$implicit,i=g.Xb(3);g.bc("innerHtml",i.article.content.paragraphs[n],g.gc)}}function v(e,t){if(1&e&&(g.Ob(0,"div"),g.kc(1,f,1,1,"div",39),g.Nb()),2&e){var n=g.Xb().$implicit;g.Ab(1),g.ac("ngForOf",n.indexes)}}function O(e,t){if(1&e&&(g.Ob(0,"div"),g.kc(1,v,2,1,"div",38),g.Nb()),2&e){var n=t.$implicit;g.Ab(1),g.ac("ngIf","paragraph"===n.content)}}function x(e,t){if(1&e&&(g.Ob(0,"ion-slide"),g.Mb(1,"img",42),g.Nb()),2&e){var n=t.$implicit,i=g.Xb(3);g.Ab(1),g.bc("src",i.article.media.picture[n],g.hc)}}function w(e,t){if(1&e&&(g.Ob(0,"div"),g.Ob(1,"ion-slides",41),g.kc(2,x,2,1,"ion-slide",17),g.Nb(),g.Nb()),2&e){var n=g.Xb().$implicit,i=g.Xb();g.Ab(1),g.ac("options",i.slideOpts),g.Ab(1),g.ac("ngForOf",n.indexes)}}function y(e,t){if(1&e&&(g.Ob(0,"div"),g.kc(1,w,3,2,"div",38),g.Nb()),2&e){var n=t.$implicit;g.Ab(1),g.ac("ngIf","slider"===n.content)}}var P=function(e,t){return["/article",e,t]};function _(e,t){if(1&e&&(g.Ob(0,"ion-col",43),g.Ob(1,"ion-item",44),g.Ob(2,"ion-col",45),g.Mb(3,"img",46),g.Ob(4,"ion-card-header"),g.Ob(5,"ion-card-title",47),g.lc(6),g.Nb(),g.Nb(),g.Ob(7,"ion-card-content",48),g.Ob(8,"div"),g.lc(9),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb()),2&e){var n=t.$implicit;g.Ab(1),g.ac("routerLink",g.ec(4,P,n.category,n.id)),g.Ab(2),g.bc("src",n.media.square,g.hc),g.Ab(3),g.mc(n.title),g.Ab(3),g.nc(" ",n.content.header.substring(0,65),"..")}}var C,M,k,N=function(e){return{gave:e}},A=[{path:"",component:(C=function(){function e(t,n,i,r,o,a,s,c){var l=this;_classCallCheck(this,e),this.http=t,this.modalController=n,this.activatedRoute=i,this.sanitizer=r,this.breakpointObserver=o,this.router=a,this.firestore=s,this.ip=c,this.slideOptions={1:{initialSlide:0,speed:600,loop:!0},2:{initialSlide:0,speed:400,slidesPerView:4.5},3:{initialSlide:0,speed:400,slidesPerView:2.5},4:{initialSlide:0,speed:400,slidesPerView:1.8}},this.article={id:0,title:"",author:"",date:"",peopleInvolved:[],photosAuthor:"",readTime:0,poster:"",image:"",category:"",content:{rules:{},header:"",paragraphs:[]},media:{picture:[],video:[],grid:[]},reactions:{energy:0,rid:""}},this.articles={popular:[]},this.slideOpts={initialSlide:0,speed:400,autoHeight:!0},this.collectionName="articles",this.gaveEnergy=!1,this.postFeedbackProgress=0,this.maxAmountOfEnergy=10,this.wideArticle=!0,this.narrowArticle=!1,this.logoImage="https://firebasestorage.googleapis.com/v0/b/alexdarie-2251.appspot.com/o/utils%2Flogo.png?alt=media&token=408fdde2-51fc-4761-b285-84d7fb711dc3",this.howMany=3,this.activatedRoute.params.subscribe((function(e){l.id=e.id,l.category=e.type})),this.disableReactions=!1}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.router.onSameUrlNavigation="reload",e.next=3,this.firestore.collection(this.collectionName).ref.orderBy("date","desc").get();case 3:return e.sent.forEach((function(e){i.processSnapshopDoc(e)})),e.next=6,this.getIP();case 6:return t=this.firestore.collection("reactions").doc(this.article.reactions.rid),e.next=9,t.ref.get();case 9:(n=e.sent.data()).hasOwnProperty("views")&&n.views.includes(this.ipAddress)||t.update({views:l.firestore.FieldValue.arrayUnion(this.ipAddress)}),n.energy.includes(this.ipAddress)&&(this.gaveEnergy=!0),this.setViewBreakpoints();case 11:case"end":return e.stop()}}),e,this)})))}},{key:"setViewBreakpoints",value:function(){var e=this;this.breakpointObserver.observe(["(min-width: 1199px)"]).subscribe((function(t){t.matches?(e.wideArticle=!0,e.narrowArticle=!1):(e.narrowArticle=!0,e.wideArticle=!1)}))}},{key:"getIP",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.ip.getIPAddress().subscribe((function(n){t.ipAddress=n.ip,console.log(t.ipAddress),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"processSnapshopDoc",value:function(e){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.data()).id!=this.id||n.category!==this.category){t.next=10;break}return this.article=n,this.articleHash=e.id,i=this.firestore.collection("reactions").doc(this.article.reactions.rid),t.next=6,i.ref.get();case 6:r=t.sent.data(),this.article.reactions.energy=r.energy.length,this.postFeedbackProgress=r.energy.length/this.maxAmountOfEnergy,t.next=11;break;case 10:this.buildMostPopularArticles(n);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"updateArticle",value:function(e){var t=e.data();t.id==this.id&&t.category===this.category&&(this.article=t,this.articleHash=e.id)}},{key:"buildMostPopularArticles",value:function(e){for(var t=this.articles.popular,n=t.length,i=0,r=0;r<n-1;r++)e.views<t[r].views&&(i+=1);for(var o=n;o>i;o--)t[o]=t[o-1];t[i]=e}},{key:"ngOnDestroy",value:function(){this.router.onSameUrlNavigation="ignore"}},{key:"delay",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"react",value:function(e){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.disableReactions=!0,t.t0=this.articleHash.length<1,!t.t0){t.next=5;break}return t.next=5,this.getIP();case 5:return n=this.firestore.collection("reactions").doc(this.article.reactions.rid),t.next=8,n.ref.get();case 8:i=t.sent.data(),this.firestore.collection("articles").doc(this.articleHash),"energy"===e&&(i.energy.includes(this.ipAddress)?n.update({energy:l.firestore.FieldValue.arrayRemove(this.ipAddress)}).then((function(){r.article.reactions.energy-=1,r.gaveEnergy=!1,r.disableReactions=!1,r.postFeedbackProgress=r.article.reactions.energy/r.maxAmountOfEnergy})):n.update({energy:l.firestore.FieldValue.arrayUnion(this.ipAddress)}).then((function(){r.article.reactions.energy+=1,r.gaveEnergy=!0,r.disableReactions=!1,r.postFeedbackProgress=r.article.reactions.energy/r.maxAmountOfEnergy})));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"objectValues",value:function(e){return Object.values(e)}},{key:"presentModal",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:d.a,swipeToClose:!0,componentProps:{evnt:this.article},cssClass:"custom-modal-css"});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}}]),e}(),C.\u0275fac=function(e){return new(e||C)(g.Lb(b.a),g.Lb(a.z),g.Lb(s.a),g.Lb(p.b),g.Lb(u.a),g.Lb(s.f),g.Lb(h.a),g.Lb(m))},C.\u0275cmp=g.Fb({type:C,selectors:[["app-article"]],decls:64,vars:14,consts:[[3,"translucent"],[1,"toolbar"],["routerLink","/home",2,"background-color","transparent","border","none","outline","none"],[1,"site-title",3,"src"],["slot","end",1,"toolbar-buttons"],["href","https://www.instagram.com/_alexdarie/","target","_blank"],["slot","icon-only","ios","logo-instagram","md","logo-instagram",1,"white-icons"],["href","https://github.com/alexdarie","target","_blank"],["slot","icon-only","name","logo-github",1,"white-icons"],[2,"padding","0"],[1,"parallax"],[1,"article-body"],[1,"article-media"],["size-xl","5.5","push-xl","0.5","size-lg","5.5","push-lg","0.5","size-md","5.5","push-md","0.5","size-sm","10","push-sm","1","size-xs","11","push-xs","0.5",1,"article-story"],[2,"margin-bottom","15px","font-family","coolvetica, sans-serif"],[2,"margin","-25px 0 0 0"],[1,"author",2,"font-family","'Noto Sans Avestan', sans-serif"],[4,"ngFor","ngForOf"],["size-xl","5.5","push-xl","0.5","size-lg","5.5","push-lg","0.5","size-md","5.5","push-md","0.5","size-sm","10","push-sm","1","size-xs","11","push-xs","0.5",1,"article-images"],[1,"feedback"],["lines","none",1,"inner-feedback"],["slot","end"],[3,"disabled","click"],["slot","icon-only","ios","flash","md","flash",1,"did-not-give",3,"ngClass"],["tooltip","test","slot","end",3,"value"],[1,"article-recent-posts"],[1,"recent-posts"],[2,"color","gray"],[1,"recent-posts-container"],["class","column-padding","size-xl","3","push-xl","1.5","size-lg","3.5","push-lg","0.5","size-md","4","push-md","0","size-sm","4","push-sm","0","size-xs","11","push-xs","0.5",4,"ngFor","ngForOf"],[2,"background-color","black"],[1,"posts-centered-container",2,"background-color","black","color","white"],[1,"card-subtitle-light-white"],["name","logo-ionic"],["name","heart"],["name","logo-firebase"],["href","https://www.instagram.com/_alexdarie/",2,"color","white"],[1,"contact-last-col"],[4,"ngIf"],[3,"innerHtml",4,"ngFor","ngForOf"],[3,"innerHtml"],["pager","true",3,"options"],[2,"margin","auto",3,"src"],["size-xl","3","push-xl","1.5","size-lg","3.5","push-lg","0.5","size-md","4","push-md","0","size-sm","4","push-sm","0","size-xs","11","push-xs","0.5",1,"column-padding"],["lines","none",1,"ion-activated","rounded-corners",3,"routerLink"],[1,"inner-column-padding"],[3,"src"],[1,"card-title"],[1,"card-content"]],template:function(e,t){1&e&&(g.Ob(0,"ion-header",0),g.Ob(1,"ion-toolbar",1),g.Ob(2,"ion-text"),g.Ob(3,"button",2),g.Mb(4,"img",3),g.Nb(),g.Nb(),g.Ob(5,"ion-buttons",4),g.Ob(6,"ion-button",5),g.Mb(7,"ion-icon",6),g.Nb(),g.Ob(8,"ion-button",7),g.Mb(9,"ion-icon",8),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Ob(10,"ion-content"),g.Ob(11,"ion-row"),g.Ob(12,"ion-col",9),g.Mb(13,"div",10),g.Ob(14,"ion-grid",11),g.Ob(15,"ion-row",12),g.Mb(16,"p"),g.Nb(),g.Ob(17,"ion-row",12),g.Ob(18,"ion-col",13),g.Ob(19,"div"),g.Ob(20,"h1",14),g.lc(21),g.Nb(),g.Ob(22,"ion-row",15),g.Ob(23,"p",16),g.lc(24),g.Nb(),g.Nb(),g.Nb(),g.kc(25,O,2,1,"div",17),g.Nb(),g.Ob(26,"ion-col",18),g.kc(27,y,2,1,"div",17),g.Nb(),g.Nb(),g.Ob(28,"ion-row",19),g.Ob(29,"ion-list",20),g.Ob(30,"ion-item"),g.Ob(31,"ion-buttons",21),g.Ob(32,"ion-button",22),g.Vb("click",(function(){return t.react("energy")})),g.Mb(33,"ion-icon",23),g.Nb(),g.Nb(),g.Mb(34,"ion-progress-bar",24),g.Nb(),g.Nb(),g.Nb(),g.Ob(35,"ion-row",25),g.Ob(36,"p",26),g.Ob(37,"span",27),g.lc(38,"Recent"),g.Nb(),g.lc(39," posts"),g.Nb(),g.Nb(),g.Ob(40,"ion-row",28),g.kc(41,_,10,7,"ion-col",29),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Ob(42,"ion-footer",30),g.Ob(43,"ion-grid"),g.Ob(44,"ion-row",31),g.Ob(45,"ion-col"),g.Ob(46,"p",32),g.lc(47,"Alex Darie"),g.Nb(),g.Nb(),g.Ob(48,"ion-col",32),g.Ob(49,"p"),g.lc(50,"I've been coding this for a while now, using "),g.Mb(51,"ion-icon",33),g.lc(52,", "),g.Mb(53,"ion-icon",34),g.lc(54,", namecheap, and "),g.Mb(55,"ion-icon",35),g.lc(56,"."),g.Mb(57,"br"),g.Nb(),g.Ob(58,"p"),g.lc(59,"The fastest (and most reliable) way to reach me is on Instagram: "),g.Nb(),g.Ob(60,"p"),g.Ob(61,"a",36),g.lc(62,"instagram.com/alexdarie"),g.Nb(),g.Nb(),g.Nb(),g.Mb(63,"ion-col",37),g.Nb(),g.Nb(),g.Nb(),g.Nb()),2&e&&(g.ac("translucent",!0),g.Ab(4),g.ac("src",t.logoImage,g.hc),g.Ab(9),g.jc("background-image",t.article.poster,g.Eb),g.Ab(8),g.nc(" ",t.article.title," "),g.Ab(3),g.nc("",t.article.readTime," minute read"),g.Ab(1),g.ac("ngForOf",t.objectValues(t.article.content.rules)),g.Ab(2),g.ac("ngForOf",t.objectValues(t.article.content.rules)),g.Ab(5),g.ac("disabled",t.disableReactions),g.Ab(1),g.ac("ngClass",g.dc(12,N,t.gaveEnergy)),g.Ab(1),g.bc("value",t.postFeedbackProgress),g.Ab(7),g.ac("ngForOf",t.articles.popular.slice(0,t.howMany)))},directives:[a.l,a.w,a.v,a.C,s.g,a.c,a.b,a.m,a.i,a.s,a.h,a.k,r.i,a.p,a.n,r.h,a.q,a.j,r.j,a.u,a.t,a.f,a.g,a.e],styles:["p[_ngcontent-%COMP%]{font-size:16px}.article-body[_ngcontent-%COMP%], .article-body-lg[_ngcontent-%COMP%]{margin:0 20vw}.author[_ngcontent-%COMP%]{font-size:13px;color:grey;font-family:Noto Sans Avestan,sans-serif}.article-images[_ngcontent-%COMP%]{margin-right:auto}.article-media[_ngcontent-%COMP%]{margin:auto}.top-image-resizer[_ngcontent-%COMP%]{margin-left:15vw;margin-right:15vw}.textual[_ngcontent-%COMP%]{min-width:350px}.card-subtitle-light-white[_ngcontent-%COMP%]{font-family:Noto Sans Avestan,sans-serif;color:#c9c9c9}.card-title[_ngcontent-%COMP%]{font-size:20px;font-family:interstate,sans-serif;font-weight:530}.card-content[_ngcontent-%COMP%]{font-family:coolvetica,sans-serif;color:grey}.parallax[_ngcontent-%COMP%]{height:45vh;background-attachment:fixed;background-position:top;background-repeat:no-repeat;background-size:contain;margin-bottom:-20px}ion-toolbar[_ngcontent-%COMP%]{padding-left:5vw;padding-right:5vw}.site-title[_ngcontent-%COMP%]{margin:2px 0 0 1vw;height:30px}.posts-centered-container[_ngcontent-%COMP%]{margin:30px 10vw;background-color:#fff}.news-min-width[_ngcontent-%COMP%]{min-width:240px}.did-not-give[_ngcontent-%COMP%]{color:grey}.gave[_ngcontent-%COMP%]{color:#fcba03}ion-progress-bar[_ngcontent-%COMP%]{margin-left:3px;height:10px;--progress-background:#fcba03;width:15vw;min-width:120px}.rounded-corners[_ngcontent-%COMP%], ion-progress-bar[_ngcontent-%COMP%]{border-radius:5px}.feedback[_ngcontent-%COMP%]{margin-left:1vw}.recent-posts[_ngcontent-%COMP%]{padding-top:10px;margin-bottom:10px;text-transform:uppercase;font-family:interstate,sans-serif;font-size:20px}.recent-posts-container[_ngcontent-%COMP%]{margin-bottom:2vh}.column-padding[_ngcontent-%COMP%]{padding:15px 10px}.inner-column-padding[_ngcontent-%COMP%]{padding:20px 15px}.article-recent-posts[_ngcontent-%COMP%]{margin:0 5vw}.article-story[_ngcontent-%COMP%]{padding:0 15px 0 0}@media screen and (min-width:2000px){.posts-centered-container[_ngcontent-%COMP%]{margin:30px 20vw}}@media only screen and (max-device-width:1366px){.parallax[_ngcontent-%COMP%]{background-attachment:scroll}}@media screen and (max-width:1500px){.article-body[_ngcontent-%COMP%], .article-body-lg[_ngcontent-%COMP%]{margin:0 10vw}.column-padding[_ngcontent-%COMP%]{padding:10px 5px}.inner-column-padding[_ngcontent-%COMP%]{padding:10px 0}}@media screen and (max-width:1125px){.posts-centered-container[_ngcontent-%COMP%]{margin:30px 2vw}.article-body[_ngcontent-%COMP%], .article-body-lg[_ngcontent-%COMP%]{margin:0 3vw}.parallax[_ngcontent-%COMP%]{height:35vh}}@media screen and (max-width:950px){.posts-centered-container[_ngcontent-%COMP%]{margin:30px .5vw}.contact-last-col[_ngcontent-%COMP%]{max-width:5vw}.parallax[_ngcontent-%COMP%]{height:31vh}}@media screen and (max-width:790px){.inner-feedback[_ngcontent-%COMP%]{margin-left:auto;margin-right:1vw}}@media screen and (max-width:730px){.parallax[_ngcontent-%COMP%]{height:27vh}}@media screen and (max-width:680px){.article-body[_ngcontent-%COMP%]{margin:0 1vw}.parallax[_ngcontent-%COMP%]{height:20vh}}@media screen and (max-width:636px){.media[_ngcontent-%COMP%]{min-width:auto}.site-title[_ngcontent-%COMP%]{margin-left:-10px;height:28px}}@media screen and (max-width:450px){.textual[_ngcontent-%COMP%]{min-width:250px}}@media screen and (max-width:420px){.site-title[_ngcontent-%COMP%]{margin-left:-10px;font-size:27px}.card-title[_ngcontent-%COMP%]{font-size:18px}}@media screen and (max-width:330px){.site-title[_ngcontent-%COMP%]{margin-left:-10px;font-size:26px}}"]}),C)}],z=((k=function e(){_classCallCheck(this,e)}).\u0275mod=g.Jb({type:k}),k.\u0275inj=g.Ib({factory:function(e){return new(e||k)},imports:[[s.h.forChild(A)],s.h]}),k),F=((M=function e(){_classCallCheck(this,e)}).\u0275mod=g.Jb({type:M}),M.\u0275inj=g.Ib({factory:function(e){return new(e||M)},imports:[[r.b,o.a,a.x,z,b.b]]}),M)}}]);